<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processo Claro - Sistema Completo</title>
    <style>
        /* ===== ESTILO COMPLETO ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --azul-principal: #1a3c8b;
            --azul-claro: #4dabf7;
            --azul-bg: #e7f5ff;
            --cinza-claro: #f8f9fa;
            --cinza: #495057;
            --verde: #40c057;
            --branco: #ffffff;
            --sombra: 0 5px 15px rgba(0,0,0,0.08);
            --radius: 10px;
        }
        
        body {
            background-color: var(--cinza-claro);
            color: var(--cinza);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* HEADER */
        .header {
            background: var(--azul-principal);
            color: var(--branco);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--branco);
            text-decoration: none;
        }
        
        .logo span {
            color: var(--azul-claro);
        }
        
        .nav a {
            color: var(--branco);
            text-decoration: none;
            margin-left: 1.5rem;
            font-weight: 500;
        }
        
        /* BOTÕES */
        .btn {
            display: inline-block;
            background: var(--azul-claro);
            color: var(--branco);
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: #339af0;
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background: var(--verde);
        }
        
        .btn-success:hover {
            background: #37b24d;
        }
        
        .btn-secondary {
            background: var(--branco);
            color: var(--azul-principal);
            border: 2px solid var(--azul-principal);
        }
        
        .btn-secondary:hover {
            background: var(--cinza-claro);
        }
        
        /* FORMULÁRIOS */
        .form-container {
            background: var(--branco);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--sombra);
            max-width: 500px;
            margin: 2rem auto;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--cinza);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 1rem;
        }
        
        input:focus {
            outline: none;
            border-color: var(--azul-claro);
            box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.1);
        }
        
        /* HERO */
        .hero {
            padding: 4rem 0;
            text-align: center;
            background: linear-gradient(135deg, var(--azul-bg) 0%, #f3e5f5 100%);
        }
        
        .hero h1 {
            font-size: 2.2rem;
            color: var(--azul-principal);
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 2rem;
            color: var(--cinza);
        }
        
        /* CARDS */
        .card {
            background: var(--branco);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--sombra);
            margin-bottom: 1.5rem;
        }
        
        .plan-card {
            border: 2px solid var(--cinza-claro);
            transition: transform 0.3s;
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
        }
        
        .plan-card.featured {
            border-color: var(--azul-claro);
        }
        
        /* PROCESS STEPS */
        .process-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .step-icon {
            background: var(--azul-claro);
            color: var(--branco);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: bold;
        }
        
        /* ALERTAS */
        .alert {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
        }
        
        .alert-info {
            background: var(--azul-bg);
            border-left: 4px solid var(--azul-claro);
            color: var(--azul-principal);
        }
        
        .alert-success {
            background: #d3f9d8;
            border-left: 4px solid var(--verde);
            color: #2b8a3e;
        }
        
        .alert-warning {
            background: #fff3bf;
            border-left: 4px solid #fcc419;
            color: #e67700;
        }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
            
            .nav a {
                margin: 0 0.5rem;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
        }
        
        /* TELAS OCULTAS INICIALMENTE */
        .tela {
            display: none;
        }
        
        .tela.ativa {
            display: block;
        }
        
        /* PLANOS */
        .planos-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: center;
            margin: 2rem 0;
        }
        
        .plan-name {
            font-size: 1.5rem;
            color: var(--azul-principal);
            margin-bottom: 0.5rem;
        }
        
        .plan-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--azul-claro);
            margin-bottom: 1rem;
        }
        
        /* NOVOS ESTILOS PARA RECUPERAÇÃO DE SENHA */
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4dabf7;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background-color: #ffeaea;
            color: #d63031;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #d63031;
        }
        
        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
        
        /* ESTILOS PARA MENSAGENS NO LOGIN */
        .login-message {
            text-align: center;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        
        .login-message a {
            color: #4dabf7;
            text-decoration: none;
            font-weight: 600;
        }
        
        .login-message a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- HEADER FIXO -->
    <header class="header">
        <div class="container header-content">
            <a href="#" class="logo" onclick="mostrarTela('inicio')">Processo<span>Claro</span></a>
            <nav class="nav" id="nav-menu">
                <!-- Menu será preenchido por JS -->
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- ===== TELA 1: INÍCIO/CADASTRO ===== -->
        <section id="tela-inicio" class="tela ativa">
            <div class="hero">
                <h1>Descubra o status do seu processo judicial em 2 minutos</h1>
                <p>Consulta gratuita • Explicação simples • Sem juridiquês</p>
            </div>

            <div class="form-container">
                <h2 style="text-align: center; color: #1a3c8b; margin-bottom: 1.5rem;">Faça seu cadastro grátis</h2>
                
                <form id="form-cadastro">
                    <div class="form-group">
                        <label for="nome">Nome Completo *</label>
                        <input type="text" id="nome" placeholder="Seu nome completo" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" placeholder="seu@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="whatsapp">WhatsApp (com DDD) *</label>
                        <input type="tel" id="whatsapp" placeholder="(11) 99999-9999" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="senha">Crie uma Senha *</label>
                        <input type="password" id="senha" placeholder="Mínimo 6 caracteres" required minlength="6">
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmar-senha-cadastro">Confirmar Senha *</label>
                        <input type="password" id="confirmar-senha-cadastro" placeholder="Digite novamente" required minlength="6">
                    </div>
                    
                    <button type="submit" class="btn btn-block">FAZER CADASTRO E CONSULTAR GRÁTIS</button>
                    
                    <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666;">
                        Ao continuar, você concorda com nossos Termos.
                    </p>
                </form>
                
                <div style="text-align: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #eee;">
                    <p>Já tem cadastro? <a href="#" onclick="mostrarTela('login')" style="color: #4dabf7; font-weight: 600;">Faça login</a></p>
                </div>
            </div>

            <div class="alert alert-info" style="max-width: 800px; margin: 2rem auto;">
                <h3 style="margin-bottom: 0.5rem;">Como funciona:</h3>
                <ol style="padding-left: 1.5rem;">
                    <li>Faça cadastro rápido (30 segundos)</li>
                    <li>Acesse a consulta gratuita</li>
                    <li>Digite o número do processo</li>
                    <li>Receba o status em linguagem simples</li>
                    <li>Para análise completa, assine um plano</li>
                </ol>
                <p style="margin-top: 1rem; font-size: 0.9rem;">
                    <strong>⚠️ Importante:</strong> Serviço informativo. Não substituímos advogado.
                </p>
            </div>
        </section>

        <!-- ===== TELA 2: LOGIN ===== -->
        <section id="tela-login" class="tela">
            <div class="form-container">
                <h1 style="text-align: center; color: #1a3c8b; margin-bottom: 0.5rem;">Acesse sua conta</h1>
                <p style="text-align: center; color: #666; margin-bottom: 2rem;">Entre com seu e-mail e senha</p>
                
                <form id="form-login">
                    <div class="form-group">
                        <label for="login-email">E-mail</label>
                        <input type="email" id="login-email" placeholder="seu@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-senha">Senha</label>
                        <input type="password" id="login-senha" placeholder="Sua senha" required>
                    </div>
                    
                    <button type="submit" class="btn btn-block">ENTRAR NA MINHA CONTA</button>
                    
                    <div class="login-message">
                        <a href="#" onclick="mostrarTela('recuperacao')">Esqueci minha senha</a>
                    </div>
                </form>
                
                <div style="text-align: center; margin-top: 1.5rem;">
                    <p>Não tem conta? <a href="#" onclick="mostrarTela('inicio')" style="color: #4dabf7; font-weight: 600;">Faça seu cadastro grátis</a></p>
                </div>
            </div>
        </section>

        <!-- ===== TELA 3: RECUPERAÇÃO DE SENHA ===== -->
        <section id="tela-recuperacao" class="tela">
            <div class="form-container">
                <h1 style="text-align: center; color: #1a3c8b;">Recuperar Senha</h1>
                
                <!-- Etapa 1: Solicitar recuperação -->
                <div id="etapa1-recuperacao">
                    <p style="text-align: center; margin-bottom: 1.5rem;">
                        Digite seu e-mail cadastrado para receber um token de recuperação
                    </p>
                    
                    <form id="form-solicitar-recuperacao">
                        <div class="form-group">
                            <label for="email-recuperacao">E-mail cadastrado</label>
                            <input type="email" id="email-recuperacao" placeholder="seu@email.com" required>
                        </div>
                        
                        <button type="submit" class="btn btn-block">ENVIAR TOKEN DE RECUPERAÇÃO</button>
                    </form>
                    
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <p>Lembrou da senha? <a href="#" onclick="mostrarTela('login')" style="color: #4dabf7;">Faça login</a></p>
                    </div>
                </div>
                
                <!-- Etapa 2: Inserir token e nova senha -->
                <div id="etapa2-recuperacao" style="display: none;">
                    <p style="text-align: center; margin-bottom: 1.5rem;">
                        Digite o token recebido por e-mail e sua nova senha
                    </p>
                    
                    <form id="form-alterar-senha">
                        <input type="hidden" id="email-token">
                        
                        <div class="form-group">
                            <label for="token-recuperacao">Token de recuperação</label>
                            <input type="text" id="token-recuperacao" placeholder="Ex: ABC123DEF" required>
                            <small style="color: #666;">Verifique sua caixa de e-mail (e spam)</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="nova-senha">Nova Senha</label>
                            <input type="password" id="nova-senha" placeholder="Mínimo 6 caracteres" required minlength="6">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmar-senha">Confirmar Nova Senha</label>
                            <input type="password" id="confirmar-senha" placeholder="Digite novamente" required minlength="6">
                        </div>
                        
                        <button type="submit" class="btn btn-block btn-success">ALTERAR SENHA</button>
                    </form>
                    
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button onclick="voltarEtapa1Recuperacao()" class="btn btn-secondary">Voltar</button>
                    </div>
                </div>
                
                <!-- Loader -->
                <div id="loader-recuperacao" class="loader"></div>
                
                <!-- Mensagens -->
                <div id="mensagem-recuperacao"></div>
            </div>
        </section>

        <!-- ===== TELA 4: CONSULTA GRÁTIS ===== -->
        <section id="tela-consulta" class="tela">
            <div class="hero">
                <h1>Consulta Gratuita do Seu Processo</h1>
                <p>Digite o número do processo para ver o status atual</p>
            </div>

            <div class="form-container">
                <h2 style="text-align: center; color: #1a3c8b;">Digite o número do processo</h2>
                
                <form id="form-consulta">
                    <div class="form-group">
                        <label for="numero-processo">Número do Processo *</label>
                        <input type="text" id="numero-processo" placeholder="Ex: 0000000-00.0000.0.00.0000" required>
                        <small style="color: #666;">Digite qualquer número para teste</small>
                    </div>
                    
                    <button type="submit" class="btn btn-block">CONSULTAR STATUS GRATUITO</button>
                </form>
            </div>

            <!-- Resultado da consulta -->
            <div id="resultado-consulta" class="card" style="display: none; max-width: 800px; margin: 2rem auto;">
                <h2 style="color: #1a3c8b; margin-bottom: 1rem;">Resultado da Consulta</h2>
                
                <div class="process-step">
                    <div class="step-icon">1</div>
                    <div>
                        <h3 style="margin-bottom: 0.2rem;">Status Atual</h3>
                        <p><strong style="color: #4dabf7;">Aguardando designação de audiência</strong></p>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="step-icon">2</div>
                    <div>
                        <h3 style="margin-bottom: 0.2rem;">Última Movimentação</h3>
                        <p>Petição inicial protocolada em 15/03/2024</p>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="step-icon">3</div>
                    <div>
                        <h3 style="margin-bottom: 0.2rem;">Próximo Prazo</h3>
                        <p>Designação de audiência - estimado em 30 dias</p>
                    </div>
                </div>
                
                <div class="alert alert-warning">
                    <p><strong>Consulta Básica</strong> - Para entender o que significa cada etapa, próximos passos e análise completa:</p>
                    <div style="text-align: center; margin-top: 1rem;">
                        <button onclick="mostrarTela('planos')" class="btn btn-success">VER ANÁLISE COMPLETA (R$ 29,90)</button>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem;">ou assine um de nossos planos mensais</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button onclick="mostrarTela('consulta')" class="btn btn-secondary">FAZER OUTRA CONSULTA</button>
                </div>
            </div>
        </section>

        <!-- ===== TELA 5: PLANOS ===== -->
        <section id="tela-planos" class="tela">
            <div class="hero">
                <h1>Escolha o plano ideal para você</h1>
                <p>Entenda completamente seu processo judicial</p>
            </div>

            <div class="planos-container">
                <!-- Plano 1 -->
                <div class="card plan-card" style="flex: 1; min-width: 300px;">
                    <div class="plan-name">Acompanhamento Básico</div>
                    <div class="plan-price">R$ 9,90<span style="font-size: 1rem; color: #666;">/mês</span></div>
                    
                    <ul style="list-style: none; margin: 1.5rem 0;">
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Acompanhamento do processo</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Atualizações em até 24h</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Notificações por e-mail</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Linguagem simples</li>
                        <li style="padding: 0.5rem 0;">✓ Suporte por e-mail</li>
                    </ul>
                    
                    <button onclick="selecionarPlano('basico')" class="btn btn-secondary btn-block">SELECIONAR PLANO</button>
                </div>
                
                <!-- Plano 2 (Destaque) -->
                <div class="card plan-card featured" style="flex: 1; min-width: 300px;">
                    <div style="background: #4dabf7; color: white; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-bottom: 1rem; font-size: 0.9rem;">MAIS POPULAR</div>
                    <div class="plan-name">Relatório Completo</div>
                    <div class="plan-price">R$ 29,90<span style="font-size: 1rem; color: #666;">/mês</span></div>
                    
                    <ul style="list-style: none; margin: 1.5rem 0;">
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Tudo do Plano Básico +</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Relatório mensal em PDF</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Análise por advogado</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Explicação detalhada</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Próximos passos</li>
                        <li style="padding: 0.5rem 0;">✓ Entrega em até 48h</li>
                    </ul>
                    
                    <button onclick="selecionarPlano('completo')" class="btn btn-block">SELECIONAR PLANO</button>
                </div>
                
                <!-- Pagamento Único -->
                <div class="card plan-card" style="flex: 1; min-width: 300px;">
                    <div class="plan-name">Análise Pontual</div>
                    <div class="plan-price">R$ 49,90<span style="font-size: 1rem; color: #666;">/único</span></div>
                    
                    <ul style="list-style: none; margin: 1.5rem 0;">
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Relatório completo único</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Análise do processo atual</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Explicação passo a passo</li>
                        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">✓ Recomendações</li>
                        <li style="padding: 0.5rem 0;">✓ PDF entregue em 48h</li>
                    </ul>
                    
                    <button onclick="selecionarPlano('pontual')" class="btn btn-secondary btn-block">COMPRAR ANÁLISE</button>
                </div>
            </div>

            <!-- Formulário de pagamento -->
            <div id="pagamento-container" class="form-container" style="display: none;">
                <h2 style="text-align: center; color: #1a3c8b;">Finalizar Compra</h2>
                <p style="text-align: center; color: #666; margin-bottom: 1.5rem;">Plano selecionado: <strong id="plano-selecionado"></strong></p>
                
                <form id="pagamento-form">
                    <div class="form-group">
                        <label for="nome-cartao">Nome no Cartão</label>
                        <input type="text" id="nome-cartao" placeholder="Como está no cartão" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="numero-cartao">Número do Cartão</label>
                        <input type="text" id="numero-cartao" placeholder="0000 0000 0000 0000" required>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <div class="form-group" style="flex: 1;">
                            <label for="validade">Validade (MM/AA)</label>
                            <input type="text" id="validade" placeholder="MM/AA" required>
                        </div>
                        
                        <div class="form-group" style="flex: 1;">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" placeholder="123" required>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <p><strong>Pagamento simulado:</strong> Este é um protótipo. Não será cobrado nada.</p>
                    </div>
                    
                    <button type="submit" class="btn btn-success btn-block">CONFIRMAR PAGAMENTO</button>
                    <button type="button" onclick="cancelarPagamento()" class="btn btn-secondary btn-block" style="margin-top: 1rem;">CANCELAR</button>
                </form>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="mostrarTela('dashboard')" class="btn btn-secondary">IR PARA MEU DASHBOARD</button>
            </div>
        </section>

        <!-- ===== TELA 6: DASHBOARD ===== -->
        <section id="tela-dashboard" class="tela">
            <div class="hero" style="padding: 2rem 0;">
                <h1>Seu Dashboard</h1>
                <p>Bem-vindo à sua área de acompanhamento</p>
            </div>

            <!-- Status do Plano -->
            <div class="card" style="max-width: 800px; margin: 0 auto 2rem;">
                <h2 style="color: #1a3c8b; margin-bottom: 1rem;">Seu Plano</h2>
                <div id="plano-info">
                    <p>Carregando informações do seu plano...</p>
                </div>
                <div style="text-align: center; margin-top: 1rem;">
                    <button onclick="mostrarTela('planos')" class="btn btn-secondary">ALTERAR PLANO</button>
                </div>
            </div>

            <!-- Processos Monitorados -->
            <div class="card" style="max-width: 800px; margin: 0 auto 2rem;">
                <h2 style="color: #1a3c8b; margin-bottom: 1rem;">Seus Processos</h2>
                
                <div id="lista-processos">
                    <p>Nenhum processo cadastrado ainda.</p>
                </div>
                
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button onclick="mostrarTela('consulta')" class="btn">ADICIONAR NOVO PROCESSO</button>
                </div>
            </div>

            <!-- Relatórios -->
            <div class="card" style="max-width: 800px; margin: 0 auto 2rem;" id="relatorios-container">
                <h2 style="color: #1a3c8b; margin-bottom: 1rem;">Relatórios</h2>
                <div id="lista-relatorios">
                    <p>Você ainda não tem relatórios gerados.</p>
                </div>
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button onclick="solicitarRelatorio()" class="btn">SOLICITAR NOVO RELATÓRIO</button>
                </div>
            </div>

            <!-- Acompanhamento -->
            <div class="card" style="max-width: 800px; margin: 0 auto;">
                <h2 style="color: #1a3c8b; margin-bottom: 1rem;">Acompanhamento do Processo</h2>
                
                <div id="acompanhamento-container">
                    <p>Selecione um processo na lista acima para ver o acompanhamento.</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ===== CONFIGURAÇÃO DA API =====
        // SUA NOVA URL DA API FUNCIONANDO
        const API_URL = 'https://script.google.com/macros/s/AKfycbyS0s4DVliPnm5W2xa_EETWD4PGKpgMCX-yxCwwbpPLlyNo7vD3cElrupXrxdjQXC2O/exec';
        
        // ===== SISTEMA DE GERENCIAMENTO =====
        let usuarioLogado = null;
        let planoSelecionado = '';
        
        // ===== INICIALIZAÇÃO =====
        document.addEventListener('DOMContentLoaded', function() {
            verificarLogin();
            atualizarMenu();
            
            // Event Listeners
            document.getElementById('form-cadastro').addEventListener('submit', cadastrarUsuario);
            document.getElementById('form-login').addEventListener('submit', fazerLogin);
            document.getElementById('form-consulta').addEventListener('submit', fazerConsulta);
            document.getElementById('pagamento-form').addEventListener('submit', finalizarPagamento);
            document.getElementById('form-solicitar-recuperacao').addEventListener('submit', solicitarRecuperacao);
            document.getElementById('form-alterar-senha').addEventListener('submit', alterarSenha);
            
            // Teste inicial da API
            testarAPI();
        });
        
        // ===== TESTE DA API =====
        async function testarAPI() {
            try {
                const resposta = await fetch(API_URL);
                const dados = await resposta.json();
                console.log('✅ API testada com sucesso:', dados);
            } catch (erro) {
                console.warn('⚠️ API pode estar com problemas:', erro);
            }
        }
        
        // ===== FUNÇÕES DE API =====
        
        async function fazerRequisicaoAPI(acao, dados) {
            try {
                console.log('Enviando para API:', acao, dados);
                
                const resposta = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: acao,
                        ...dados
                    })
                });
                
                const resultado = await resposta.json();
                console.log('Resposta da API:', resultado);
                return resultado;
                
            } catch (erro) {
                console.error('Erro na API:', erro);
                return {
                    success: false,
                    message: 'Erro de conexão. Verifique sua internet.'
                };
            }
        }
        
        // ===== SISTEMA DE LOGIN =====
        
        function verificarLogin() {
            const usuarioData = localStorage.getItem('usuarioLogado');
            if (usuarioData) {
                usuarioLogado = JSON.parse(usuarioData);
                mostrarTela('dashboard');
            } else {
                mostrarTela('inicio');
            }
        }
        
        function atualizarMenu() {
            const nav = document.getElementById('nav-menu');
            nav.innerHTML = '';
            
            if (usuarioLogado) {
                nav.innerHTML = `
                    <span style="color: white; margin-right: 1rem;">Olá, ${usuarioLogado.nome ? usuarioLogado.nome.split(' ')[0] : 'Usuário'}</span>
                    <a href="#" onclick="mostrarTela('dashboard')">Dashboard</a>
                    <a href="#" onclick="mostrarTela('consulta')">Nova Consulta</a>
                    <a href="#" onclick="mostrarTela('planos')">Planos</a>
                    <a href="#" onclick="sair()">Sair</a>
                `;
            } else {
                nav.innerHTML = `
                    <a href="#" onclick="mostrarTela('inicio')">Início</a>
                    <a href="#" onclick="mostrarTela('login')">Login</a>
                    <a href="#" onclick="mostrarTela('recuperacao')">Esqueci a Senha</a>
                `;
            }
        }
        
        // ===== TROCA ENTRE TELAS =====
        function mostrarTela(nomeTela) {
            // Esconde todas as telas
            document.querySelectorAll('.tela').forEach(tela => {
                tela.classList.remove('ativa');
            });
            
            // Mostra a tela solicitada
            const telaAlvo = document.getElementById(`tela-${nomeTela}`);
            if (telaAlvo) {
                telaAlvo.classList.add('ativa');
            }
            
            // Reset da tela de recuperação quando mostrar
            if (nomeTela === 'recuperacao') {
                voltarEtapa1Recuperacao();
            }
            
            // Ações específicas para cada tela
            if (nomeTela === 'dashboard' && usuarioLogado) {
                carregarDashboard();
            }
            
            if (nomeTela === 'consulta') {
                document.getElementById('resultado-consulta').style.display = 'none';
            }
            
            if (nomeTela === 'planos') {
                document.getElementById('pagamento-container').style.display = 'none';
            }
        }
        
        // ===== CADASTRO DE USUÁRIO =====
        
        async function cadastrarUsuario(e) {
            e.preventDefault();
            
            // Validações básicas
            const senha = document.getElementById('senha').value;
            const confirmarSenha = document.getElementById('confirmar-senha-cadastro').value;
            
            if (senha !== confirmarSenha) {
                alert('❌ As senhas não coincidem!');
                return;
            }
            
            if (senha.length < 6) {
                alert('❌ A senha deve ter no mínimo 6 caracteres!');
                return;
            }
            
            // Mostrar loader
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.textContent;
            btn.textContent = 'CADASTRANDO...';
            btn.disabled = true;
            
            const usuario = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                whatsapp: document.getElementById('whatsapp').value,
                senha: senha
            };
            
            // TODO: Implementar chamada real para API quando pronta
            // Por enquanto, simula sucesso
            setTimeout(() => {
                // Restaurar botão
                btn.textContent = originalText;
                btn.disabled = false;
                
                // Simula cadastro bem-sucedido
                const usuarioSimulado = {
                    id: 'USR_' + Date.now(),
                    nome: usuario.nome,
                    email: usuario.email,
                    whatsapp: usuario.whatsapp,
                    plano: 'gratuito'
                };
                
                // Salva usuário no localStorage
                localStorage.setItem('usuarioLogado', JSON.stringify(usuarioSimulado));
                usuarioLogado = usuarioSimulado;
                
                // Atualiza menu e mostra consulta
                atualizarMenu();
                mostrarTela('consulta');
                
                alert('✅ Cadastro realizado com sucesso! Em breve a API real estará funcionando.');
                
                // Limpa formulário
                document.getElementById('form-cadastro').reset();
            }, 1000);
        }
        
        // ===== LOGIN =====
        
        async function fazerLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const senha = document.getElementById('login-senha').value;
            
            // Mostrar loader
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.textContent;
            btn.textContent = 'ENTRANDO...';
            btn.disabled = true;
            
            // TODO: Implementar chamada real para API quando pronta
            // Por enquanto, simula login
            setTimeout(() => {
                // Restaurar botão
                btn.textContent = originalText;
                btn.disabled = false;
                
                // Simula usuário existente
                const usuarioSimulado = {
                    id: 'USR_123456',
                    nome: 'Usuário Teste',
                    email: email,
                    whatsapp: '(11) 99999-9999',
                    plano: 'gratuito'
                };
                
                // Salva usuário no localStorage
                localStorage.setItem('usuarioLogado', JSON.stringify(usuarioSimulado));
                usuarioLogado = usuarioSimulado;
                
                // Atualiza menu
                atualizarMenu();
                
                // Mostra dashboard
                mostrarTela('dashboard');
                
                // Limpa formulário
                document.getElementById('form-login').reset();
                
                // Mensagem de sucesso
                alert('✅ Login realizado com sucesso! Em breve a API real estará funcionando.');
            }, 1000);
        }
        
        // ===== RECUPERAÇÃO DE SENHA =====
        
        async function solicitarRecuperacao(e) {
            e.preventDefault();
            
            const email = document.getElementById('email-recuperacao').value;
            
            if (!email || !email.includes('@')) {
                mostrarMensagemRecuperacao('❌ Digite um e-mail válido', 'error');
                return;
            }
            
            // Mostrar loader
            document.getElementById('loader-recuperacao').style.display = 'block';
            document.getElementById('mensagem-recuperacao').innerHTML = '';
            
            // TODO: Implementar chamada real para API quando pronta
            // Por enquanto, simula
            setTimeout(() => {
                // Esconder loader
                document.getElementById('loader-recuperacao').style.display = 'none';
                
                // Simula token gerado
                const tokenTeste = 'TOKEN_' + Date.now().toString(36).toUpperCase();
                
                // Salva email para próxima etapa
                document.getElementById('email-token').value = email;
                
                // MOSTRAR MENSAGEM DE SUCESSO COM TOKEN PARA TESTES
                mostrarMensagemRecuperacao(`
                    <strong>✅ Token gerado com sucesso!</strong><br>
                    <small>Em produção, este token seria enviado por e-mail para: <strong>${email}</strong></small><br><br>
                    <strong>Token para testes:</strong> <span style="background: #f8f9fa; padding: 5px 10px; border-radius: 5px; font-family: monospace;">${tokenTeste}</span>
                `, 'success');
                
                // Mostra etapa 2 após 2 segundos
                setTimeout(() => {
                    document.getElementById('etapa1-recuperacao').style.display = 'none';
                    document.getElementById('etapa2-recuperacao').style.display = 'block';
                    document.getElementById('mensagem-recuperacao').innerHTML = '';
                }, 2000);
            }, 1500);
        }
        
        async function alterarSenha(e) {
            e.preventDefault();
            
            const email = document.getElementById('email-token').value;
            const token = document.getElementById('token-recuperacao').value;
            const novaSenha = document.getElementById('nova-senha').value;
            const confirmarSenha = document.getElementById('confirmar-senha').value;
            
            // Validações
            if (novaSenha !== confirmarSenha) {
                mostrarMensagemRecuperacao('❌ As senhas não coincidem!', 'error');
                return;
            }
            
            if (novaSenha.length < 6) {
                mostrarMensagemRecuperacao('❌ A senha deve ter no mínimo 6 caracteres!', 'error');
                return;
            }
            
            // Mostrar loader
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.textContent;
            btn.textContent = 'ALTERANDO...';
            btn.disabled = true;
            
            // TODO: Implementar chamada real para API quando pronta
            // Por enquanto, simula
            setTimeout(() => {
                btn.textContent = originalText;
                btn.disabled = false;
                
                mostrarMensagemRecuperacao('✅ Senha alterada com sucesso! Em breve a API real estará funcionando.', 'success');
                
                // Aguarda 2 segundos e redireciona para login
                setTimeout(() => {
                    mostrarTela('login');
                    // Limpa formulários
                    document.getElementById('form-alterar-senha').reset();
                    document.getElementById('form-solicitar-recuperacao').reset();
                    document.getElementById('mensagem-recuperacao').innerHTML = '';
                    voltarEtapa1Recuperacao();
                }, 2000);
            }, 1500);
        }
        
        function mostrarMensagemRecuperacao(mensagem, tipo) {
            const div = document.getElementById('mensagem-recuperacao');
            
            if (tipo === 'success') {
                div.innerHTML = `<div class="success-message">${mensagem}</div>`;
            } else {
                div.innerHTML = `<div class="error-message">${mensagem}</div>`;
            }
        }
        
        function voltarEtapa1Recuperacao() {
            document.getElementById('etapa2-recuperacao').style.display = 'none';
            document.getElementById('etapa1-recuperacao').style.display = 'block';
            document.getElementById('mensagem-recuperacao').innerHTML = '';
            document.getElementById('form-solicitar-recuperacao').reset();
        }
        
        // ===== CONSULTA DE PROCESSOS =====
        function fazerConsulta(e) {
            e.preventDefault();
            
            if (!usuarioLogado) {
                alert('❌ Faça login primeiro!');
                mostrarTela('login');
                return;
            }
            
            const processo = document.getElementById('numero-processo').value;
            
            if (processo.length < 5) {
                alert('❌ Digite um número de processo válido');
                return;
            }
            
            // Salva no histórico (localStorage para demonstração)
            let historico = JSON.parse(localStorage.getItem(`historico_${usuarioLogado.email}`) || '[]');
            historico.push({
                processo: processo,
                data: new Date().toLocaleString(),
                tipo: 'consulta_gratis'
            });
            localStorage.setItem(`historico_${usuarioLogado.email}`, JSON.stringify(historico));
            
            // Mostra resultado
            document.getElementById('resultado-consulta').style.display = 'block';
            
            // Rola para o resultado
            document.getElementById('resultado-consulta').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ===== PLANOS E PAGAMENTO =====
        function selecionarPlano(plano) {
            planoSelecionado = plano;
            
            let nomePlano = '';
            switch(plano) {
                case 'basico': nomePlano = 'Acompanhamento Básico (R$ 9,90/mês)'; break;
                case 'completo': nomePlano = 'Relatório Completo (R$ 29,90/mês)'; break;
                case 'pontual': nomePlano = 'Análise Pontual (R$ 49,90)'; break;
            }
            
            document.getElementById('plano-selecionado').textContent = nomePlano;
            document.getElementById('pagamento-container').style.display = 'block';
            document.getElementById('pagamento-container').scrollIntoView({ behavior: 'smooth' });
        }
        
        function cancelarPagamento() {
            document.getElementById('pagamento-container').style.display = 'none';
        }
        
        function finalizarPagamento(e) {
            e.preventDefault();
            
            if (!usuarioLogado) {
                alert('❌ Faça login primeiro!');
                mostrarTela('login');
                return;
            }
            
            // Salva plano do usuário no localStorage (para demonstração)
            localStorage.setItem(`plano_${usuarioLogado.email}`, planoSelecionado);
            
            alert('✅ Pagamento confirmado! Plano ativado com sucesso.');
            mostrarTela('dashboard');
            
            // Limpa formulário
            document.getElementById('pagamento-form').reset();
        }
        
        // ===== DASHBOARD =====
        function carregarDashboard() {
            if (!usuarioLogado) return;
            
            // Carrega informações do plano
            const plano = localStorage.getItem(`plano_${usuarioLogado.email}`);
            const planoInfo = document.getElementById('plano-info');
            
            if (plano) {
                let nomePlano = '';
                let descricao = '';
                
                switch(plano) {
                    case 'basico':
                        nomePlano = 'Acompanhamento Básico';
                        descricao = 'R$ 9,90/mês • Atualizações em 24h';
                        break;
                    case 'completo':
                        nomePlano = 'Relatório Completo';
                        descricao = 'R$ 29,90/mês • Relatórios mensais em PDF';
                        break;
                    case 'pontual':
                        nomePlano = 'Análise Pontual';
                        descricao = 'R$ 49,90 (único) • Relatório único';
                        break;
                }
                
                planoInfo.innerHTML = `
                    <h3 style="color: #4dabf7; margin-bottom: 0.5rem;">${nomePlano}</h3>
                    <p>${descricao}</p>
                `;
                
                // Esconde relatórios se for plano básico
                if (plano === 'basico') {
                    document.getElementById('relatorios-container').style.display = 'none';
                } else {
                    document.getElementById('relatorios-container').style.display = 'block';
                }
            } else {
                planoInfo.innerHTML = `
                    <div class="alert alert-warning">
                        <p><strong>Plano Gratuito</strong></p>
                        <p>Você está no plano gratuito. Assine um plano para ter acesso completo.</p>
                    </div>
                `;
                document.getElementById('relatorios-container').style.display = 'none';
            }
            
            // Carrega processos
            carregarProcessos();
            
            // Carrega relatórios se houver
            carregarRelatorios();
        }
        
        function carregarProcessos() {
            const historico = JSON.parse(localStorage.getItem(`historico_${usuarioLogado.email}`) || '[]');
            const lista = document.getElementById('lista-processos');
            
            if (historico.length > 0) {
                let html = '';
                historico.forEach((item, index) => {
                    if (item.processo) {
                        html += `
                            <div class="process-step" style="cursor: pointer;" onclick="verProcessoDetalhes('${item.processo}')">
                                <div class="step-icon">${index + 1}</div>
                                <div>
                                    <h3 style="margin-bottom: 0.2rem;">${item.processo}</h3>
                                    <p style="font-size: 0.9rem; color: #666;">Consultado em: ${item.data}</p>
                                </div>
                            </div>
                        `;
                    }
                });
                lista.innerHTML = html;
            } else {
                lista.innerHTML = '<p>Nenhum processo cadastrado ainda.</p>';
            }
        }
        
        function verProcessoDetalhes(numero) {
            document.getElementById('acompanhamento-container').innerHTML = `
                <h3 style="color: #1a3c8b; margin-bottom: 1rem;">Processo: ${numero}</h3>
                
                <div class="process-step">
                    <div class="step-icon">1</div>
                    <div>
                        <h4 style="margin-bottom: 0.2rem;">Status Atual</h4>
                        <p><strong style="color: #4dabf7;">Aguardando audiência</strong></p>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="step-icon">2</div>
                    <div>
                        <h4 style="margin-bottom: 0.2rem;">Última Movimentação</h4>
                        <p>Petição inicial protocolada em 15/03/2024</p>
                    </div>
                </div>
                
                <div class="process-step">
                    <div class="step-icon">3</div>
                    <div>
                        <h4 style="margin-bottom: 0.2rem;">Próximos Passos</h4>
                        <p>Designação de audiência - estimado em 30 dias</p>
                    </div>
                </div>
            `;
        }
        
        function solicitarRelatorio() {
            if (!usuarioLogado) {
                alert('❌ Faça login primeiro!');
                mostrarTela('login');
                return;
            }
            
            const processo = prompt("Digite o número do processo para o relatório:");
            
            if (processo && processo.length > 5) {
                // Salva relatório (localStorage para demonstração)
                let relatorios = JSON.parse(localStorage.getItem(`relatorios_${usuarioLogado.email}`) || '[]');
                relatorios.push({
                    processo: processo,
                    data: new Date().toLocaleString(),
                    status: 'solicitado'
                });
                localStorage.setItem(`relatorios_${usuarioLogado.email}`, JSON.stringify(relatorios));
                
                alert('✅ Relatório solicitado! Será enviado por e-mail em até 48h.');
                carregarRelatorios();
            }
        }
        
        function carregarRelatorios() {
            const relatorios = JSON.parse(localStorage.getItem(`relatorios_${usuarioLogado.email}`) || '[]');
            const lista = document.getElementById('lista-relatorios');
            
            if (relatorios.length > 0) {
                let html = '';
                relatorios.forEach((rel, index) => {
                    html += `
                        <div class="process-step">
                            <div class="step-icon">📄</div>
                            <div>
                                <h3 style="margin-bottom: 0.2rem;">Relatório ${index + 1}</h3>
                                <p style="font-size: 0.9rem; color: #666;">
                                    Processo: ${rel.processo} • Emitido: ${rel.data}
                                </p>
                                <button onclick="baixarRelatorio(${index})" class="btn" style="padding: 5px 15px; font-size: 0.9rem; margin-top: 0.5rem;">
                                    BAIXAR PDF
                                </button>
                            </div>
                        </div>
                    `;
                });
                lista.innerHTML = html;
            } else {
                lista.innerHTML = '<p>Você ainda não tem relatórios gerados.</p>';
            }
        }
        
        function baixarRelatorio(index) {
            alert('📄 Download do relatório iniciado (simulado).\nEm produção, geraria um PDF real.');
        }
        
        // ===== LOGOUT =====
        function sair() {
            if (confirm('Tem certeza que deseja sair?')) {
                localStorage.removeItem('usuarioLogado');
                usuarioLogado = null;
                atualizarMenu();
                mostrarTela('inicio');
            }
        }
    </script>
</body>
</html>